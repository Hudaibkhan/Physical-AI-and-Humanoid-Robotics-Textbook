!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports.ChatbotWidget=e(require("React")):n.ChatbotWidget=e(n.React)}(this,n=>(()=>{"use strict";var e,t,o={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},i=[],s=0;s<n.length;s++){var d=n[s],c=o.base?d[0]+o.base:d[0],l=a[c]||0,p="".concat(c," ").concat(l);a[c]=l+1;var u=t(p),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var f=r(h,o);o.byIndex=s,e.splice(s,0,{identifier:p,updater:f,references:1})}i.push(p)}return i}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var s=t(a[i]);e[s].references--}for(var d=o(n,r),c=0;c<a.length;c++){var l=t(a[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}a=d}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var c=0;c<n.length;c++){var l=[].concat(n[c]);o&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},323:(n,e,t)=>{t.d(e,{IC:()=>o,kf:()=>s});const o=()=>{const n=window.getSelection();if(n.rangeCount>0){const e=n.getRangeAt(0),t=n.toString().trim();if(t){const n=e.getBoundingClientRect();return{text:t,range:e,rect:n,startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}}}return null};let r=null;const a=n=>{i(),r=document.createElement("div"),r.id="chatbot-selection-indicator",r.style.position="absolute",r.style.left=n.right-20+"px",r.style.top=n.top-20+"px",r.style.width="24px",r.style.height="24px",r.style.backgroundColor="#4f46e5",r.style.borderRadius="50%",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.color="white",r.style.fontSize="12px",r.style.fontWeight="bold",r.style.zIndex="10000",r.style.cursor="pointer",r.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",r.style.border="2px solid white",r.innerHTML="ðŸ’¬",r.addEventListener("click",()=>{const n=new CustomEvent("chatbotTextSelected",{detail:{selectedText:window.getSelection().toString().trim()}});document.dispatchEvent(n)}),document.body.appendChild(r)},i=()=>{r&&document.body.contains(r)&&(document.body.removeChild(r),r=null)},s=n=>{const e=()=>{const e=o();i(),e&&(a(e.rect),n(e))};return document.addEventListener("mouseup",e),document.addEventListener("keyup",e=>{"Shift"===e.key&&setTimeout(()=>{const e=o();i(),e&&(a(e.rect),n(e))},0)}),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("keyup",e=>{"Shift"===e.key&&setTimeout(()=>{const e=o();i(),e&&(a(e.rect),n(e))},0)})}}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},694:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,'/* Chatbot Widget Styles */\n\n.chatbot-container {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 10000;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n}\n\n/* Responsive positioning for different screen sizes */\n@media (max-width: 768px) {\n  .chatbot-container {\n    bottom: 15px;\n    right: 15px;\n  }\n}\n\n@media (max-width: 480px) {\n  .chatbot-container {\n    bottom: 10px;\n    right: 10px;\n  }\n}\n\n/* Adjust positioning for pages with narrow widths */\n@media (max-width: 360px) {\n  .chatbot-container {\n    bottom: 10px;\n    right: 5px;\n  }\n}\n\n/* Positioning for left-aligned layout (for RTL languages or left-positioned widgets) */\n.chatbot-container-left {\n  right: auto;\n  left: 20px;\n}\n\n/* Positioning for top placement */\n.chatbot-container-top {\n  bottom: auto;\n  top: 20px;\n}\n\n/* Positioning for corner placements */\n.chatbot-container-top-left {\n  bottom: auto;\n  top: 20px;\n  right: auto;\n  left: 20px;\n}\n\n.chatbot-container-bottom-left {\n  right: auto;\n  left: 20px;\n}\n\n.chatbot-container-top-right {\n  bottom: auto;\n  top: 20px;\n}\n\n/* Safe area insets for mobile devices */\n@supports (bottom: env(safe-area-inset-bottom)) {\n  .chatbot-container {\n    bottom: calc(20px + env(safe-area-inset-bottom, 0px));\n  }\n}\n\n@supports (right: env(safe-area-inset-right)) {\n  .chatbot-container {\n    right: calc(20px + env(safe-area-inset-right, 0px));\n  }\n}\n\n/* Confidence indicators */\n.confidence-indicator {\n  margin-top: 4px;\n  padding: 2px 6px;\n  border-radius: 12px;\n  display: inline-block;\n  font-size: 0.75em;\n}\n\n.confidence-high {\n  background-color: #dcfce7;\n  color: #166534;\n}\n\n.confidence-medium {\n  background-color: #fef3c7;\n  color: #92400e;\n}\n\n.confidence-low {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n/* Source similarity indicators */\n.source-similarity {\n  font-size: 0.75em;\n  color: #6b7280;\n  margin-top: 2px;\n}\n\n/* Error message styling */\n.chatbot-error {\n  padding: 8px 16px;\n  margin: 4px 0;\n  background-color: #fee2e2;\n  color: #991b1b;\n  border-radius: 4px;\n  font-size: 0.875em;\n}\n\n/* Loading state styling */\n.chatbot-modal-loading {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  background: white;\n  padding: 16px 20px;\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  z-index: 10000;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n  color: #374151;\n  font-size: 14px;\n}\n\n.chatbot-float-button {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: #4f46e5;\n  color: white;\n  border: none;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.chatbot-float-button:hover {\n  transform: scale(1.1);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n}\n\n.chatbot-icon {\n  font-size: 24px;\n}\n\n.chatbot-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10001;\n  padding: 20px;\n}\n\n.chatbot-modal {\n  width: 100%;\n  max-width: 500px;\n  height: 70vh;\n  max-height: 600px;\n  background: white;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n}\n\n.chatbot-header {\n  padding: 16px 20px;\n  background: #4f46e5;\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.chatbot-header h3 {\n  margin: 0;\n  font-size: 18px;\n}\n\n.chatbot-close-button {\n  background: none;\n  border: none;\n  color: white;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chatbot-close-button:hover {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n}\n\n.chatbot-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  background: #f9fafb;\n}\n\n.chatbot-message {\n  display: flex;\n  max-width: 85%;\n}\n\n.user-message {\n  align-self: flex-end;\n  flex-direction: row-reverse;\n}\n\n.user-message .chatbot-message-content {\n  background: #4f46e5;\n  color: white;\n  border-radius: 18px 4px 18px 18px;\n}\n\n.bot-message .chatbot-message-content {\n  background: white;\n  color: #374151;\n  border-radius: 4px 18px 18px 18px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n}\n\n.chatbot-message-content {\n  padding: 12px 16px;\n  position: relative;\n  min-width: 60px;\n  max-width: 100%;\n}\n\n.message-text {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n.source-details {\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 0.8em;\n}\n\n.source-list {\n  margin: 0;\n  padding-left: 16px;\n  list-style: none;\n}\n\n.source-item {\n  margin-bottom: 4px;\n}\n\n.chatbot-selected-text {\n  padding: 8px 20px;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-size: 0.85em;\n  border-top: 1px solid #c7d2fe;\n}\n\n.typing-indicator {\n  display: flex;\n  align-items: center;\n  padding: 8px 0;\n}\n\n.typing-dot {\n  width: 8px;\n  height: 8px;\n  background: #94a3b8;\n  border-radius: 50%;\n  margin: 0 2px;\n  animation: typing 1.4s infinite ease-in-out;\n}\n\n.typing-dot:nth-child(1) { animation-delay: 0s; }\n.typing-dot:nth-child(2) { animation-delay: 0.2s; }\n.typing-dot:nth-child(3) { animation-delay: 0.4s; }\n\n@keyframes typing {\n  0%, 60%, 100% { transform: translateY(0); }\n  30% { transform: translateY(-5px); }\n}\n\n.chatbot-input-form {\n  padding: 16px 20px;\n  background: white;\n  border-top: 1px solid #e5e7eb;\n}\n\n.chatbot-input-container {\n  display: flex;\n  gap: 8px;\n  align-items: flex-end;\n}\n\n.chatbot-textarea {\n  flex: 1;\n  border: 1px solid #d1d5db;\n  border-radius: 18px;\n  padding: 12px 16px;\n  resize: none;\n  max-height: 100px;\n  font-family: inherit;\n  font-size: 14px;\n  outline: none;\n}\n\n.chatbot-textarea:focus {\n  border-color: #4f46e5;\n  box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1);\n}\n\n.chatbot-send-button {\n  background: #4f46e5;\n  color: white;\n  border: none;\n  border-radius: 18px;\n  padding: 12px 20px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.chatbot-send-button:disabled {\n  background: #d1d5db;\n  cursor: not-allowed;\n}\n\n/* Dark theme support */\n[data-chat-theme="dark"] .chatbot-modal,\n[data-chat-theme="dark"] .chatbot-messages {\n  background: #1f2937;\n  color: #f9fafb;\n}\n\n[data-chat-theme="dark"] .bot-message .chatbot-message-content {\n  background: #374151;\n  color: #f9fafb;\n}\n\n[data-chat-theme="dark"] .chatbot-header {\n  background: #374151;\n}\n\n[data-chat-theme="dark"] .chatbot-selected-text {\n  background: #3730a3;\n  color: #e0e7ff;\n  border-color: #4f46e5;\n}\n\n[data-chat-theme="dark"] .chatbot-input-form {\n  background: #1f2937;\n  border-color: #4b5563;\n}\n\n[data-chat-theme="dark"] .chatbot-textarea {\n  background: #374151;\n  border-color: #4b5563;\n  color: #f9fafb;\n}\n\n/* Dark theme for confidence indicators */\n[data-chat-theme="dark"] .confidence-high {\n  background-color: #166534;\n  color: #dcfce7;\n}\n\n[data-chat-theme="dark"] .confidence-medium {\n  background-color: #92400e;\n  color: #fef3c7;\n}\n\n[data-chat-theme="dark"] .confidence-low {\n  background-color: #991b1b;\n  color: #fee2e2;\n}\n\n[data-chat-theme="dark"] .source-similarity {\n  color: #9ca3af;\n}\n\n[data-chat-theme="dark"] .chatbot-error {\n  background-color: #7f1d1d;\n  color: #fecaca;\n}\n\n/* Responsive design */\n@media (max-width: 640px) {\n  .chatbot-modal {\n    max-width: 100%;\n    width: calc(100% - 20px);\n    height: 80vh;\n    max-height: none;\n    margin: 10px;\n  }\n\n  .chatbot-message {\n    max-width: 90%;\n  }\n}',""]);const s=i},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},883:e=>{e.exports=n}},r={};function a(n){var e=r[n];if(void 0!==e)return e.exports;var t=r[n]={id:n,exports:{}};return o[n](t,t.exports,a),t.exports}a.m=o,a.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return a.d(e,{a:e}),e},a.d=(n,e)=>{for(var t in e)a.o(e,t)&&!a.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},a.f={},a.e=n=>Promise.all(Object.keys(a.f).reduce((e,t)=>(a.f[t](n,e),e),[])),a.u=n=>n+".widget.js",a.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),e={},t="ChatbotWidget:",a.l=(n,o,r,i)=>{if(e[n])e[n].push(o);else{var s,d;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var p=c[l];if(p.getAttribute("src")==n||p.getAttribute("data-webpack")==t+r){s=p;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[o];var u=(t,o)=>{s.onerror=s.onload=null,clearTimeout(h);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(n=>n(o)),t)return t(o)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),d&&document.head.appendChild(s)}},a.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n;globalThis.importScripts&&(n=globalThis.location+"");var e=globalThis.document;if(!n&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(n=e.currentScript.src),!n)){var t=e.getElementsByTagName("script");if(t.length)for(var o=t.length-1;o>-1&&(!n||!/^http(s?):/.test(n));)n=t[o--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=n})(),(()=>{var n={792:0};a.f.j=(e,t)=>{var o=a.o(n,e)?n[e]:void 0;if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((t,r)=>o=n[e]=[t,r]);t.push(o[2]=r);var i=a.p+a.u(e),s=new Error;a.l(i,t=>{if(a.o(n,e)&&(0!==(o=n[e])&&(n[e]=void 0),o)){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}},"chunk-"+e,e)}};var e=(e,t)=>{var o,r,[i,s,d]=t,c=0;if(i.some(e=>0!==n[e])){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);d&&d(a)}for(e&&e(t);c<i.length;c++)r=i[c],a.o(n,r)&&n[r]&&n[r][0](),n[r]=0},t=this.webpackChunkChatbotWidget=this.webpackChunkChatbotWidget||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),a.nc=void 0;var i={};a.r(i),a.d(i,{default:()=>j});var s=a(883),d=a.n(s),c=a(323);const l="chatbot_widget_state",p=n=>{try{const e={...n,timestamp:Date.now()};sessionStorage.setItem(l,JSON.stringify(e))}catch(n){console.warn("Could not save widget state to sessionStorage:",n)}},u=(n,e)=>{if(!e)return!1;if(e.isOpen){const n=6e5;return Date.now()-e.timestamp<n}return!1};var h,f,b,m=a(72),g=a.n(m),x=a(825),v=a.n(x),w=a(659),y=a.n(w),k=a(56),E=a.n(k),S=a(540),C=a.n(S),L=a(113),O=a.n(L),T=a(694),R={};function z(n,e,t,o){b||(b="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=n&&n.defaultProps,a=arguments.length-3;if(e||0===a||(e={children:void 0}),1===a)e.children=o;else if(a>1){for(var i=Array(a),s=0;s<a;s++)i[s]=arguments[s+3];e.children=i}if(e&&r)for(var d in r)void 0===e[d]&&(e[d]=r[d]);else e||(e=r||{});return{$$typeof:b,type:n,key:void 0===t?null:""+t,ref:null,props:e,_owner:null}}R.styleTagTransform=O(),R.setAttributes=E(),R.insert=y().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=C(),g()(T.A,R),T.A&&T.A.locals&&T.A.locals;const A=(0,s.lazy)(()=>a.e(448).then(a.bind(a,448))),M=({backendUrl:n})=>{const e=(()=>{const n=(()=>{try{const n=sessionStorage.getItem(l);if(n){const e=JSON.parse(n),t=Date.now(),o=36e5;return t-e.timestamp<o?e:(sessionStorage.removeItem(l),null)}return null}catch(n){return console.warn("Could not load widget state from sessionStorage:",n),null}})();return n?{isOpen:u(0,n),isWidgetVisible:!0,messages:n.messages||[],selectedText:n.selectedText||"",sessionId:n.sessionId||null}:{isOpen:!1,isWidgetVisible:!0,messages:[],selectedText:"",sessionId:null}})(),[t,o]=(0,s.useState)(e.isOpen),[r,a]=(0,s.useState)(e.isWidgetVisible),[i,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{a(!0);const n=(0,c.kf)(n=>{}),e=()=>{a(!0)};return window.addEventListener("popstate",e),window.addEventListener("hashchange",e),window.addEventListener("routeChange",e),()=>{n(),window.removeEventListener("popstate",e),window.removeEventListener("hashchange",e),window.removeEventListener("routeChange",e)}},[]),(0,s.useEffect)(()=>{const n=(n=>{const e=()=>{n()},t=()=>{n()},o=()=>{n()},r=()=>{};return window.addEventListener("popstate",e),window.addEventListener("hashchange",t),window.addEventListener("routeChange",o),window.addEventListener("beforeunload",r),window.addEventListener("turbolinks:before-visit",r),window.addEventListener("turbolinks:load",e),window.addEventListener("historyPush",e),window.addEventListener("historyReplace",e),()=>{window.removeEventListener("popstate",e),window.removeEventListener("hashchange",t),window.removeEventListener("routeChange",o),window.removeEventListener("beforeunload",r),window.removeEventListener("turbolinks:before-visit",r),window.removeEventListener("turbolinks:load",e),window.removeEventListener("historyPush",e),window.removeEventListener("historyReplace",e)}})(()=>{p({isOpen:t,isWidgetVisible:r,timestamp:Date.now()})});return p({isOpen:t,isWidgetVisible:r,timestamp:Date.now()}),()=>{n(),p({isOpen:t,isWidgetVisible:r,timestamp:Date.now()})}},[t,r]),(0,s.useEffect)(()=>{t&&!i&&d(!0)},[t,i]),r?z("div",{className:"chatbot-container",role:"region","aria-label":"Chatbot widget"},void 0,t&&z(s.Suspense,{fallback:h||(h=z("div",{className:"chatbot-modal-loading",role:"status","aria-live":"polite"},void 0,"Loading chat..."))},void 0,z(A,{backendUrl:n,onClose:()=>o(!1)})),z("button",{className:"chatbot-float-button",onClick:()=>o(!t),"aria-label":t?"Close chatbot":"Open chatbot","aria-expanded":t,"aria-controls":"chatbot-modal"},void 0,f||(f=z("div",{className:"chatbot-icon","aria-hidden":"true"},void 0,"ðŸ’¬")))):null};M.init=(n={})=>{const e={backendUrl:"http://localhost:8000",theme:"auto",...n},t=document.createElement("div");if(t.id="chatbot-widget-container",document.body.appendChild(t),void 0!==d()&&"undefined"!=typeof ReactDOM){if(window.matchMedia&&"auto"===e.theme){const n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener(()=>{const e=n.matches?"dark":"light";document.body.setAttribute("data-chat-theme",e)})}(()=>{const n="auto"===e.theme?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e.theme;document.body.setAttribute("data-chat-theme",n),ReactDOM.render(d().createElement(M,{backendUrl:e.backendUrl}),t)})()}else console.error("React and ReactDOM must be loaded before initializing the chat widget")};const j=M;return i})());